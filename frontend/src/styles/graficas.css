/* Variables CSS específicas para gráficas del dashboard */
.dashboard-graphics-grid {
  --dashboard-primary: #667eea;
  --dashboard-secondary: #764ba2;
  --dashboard-accent: #f093fb;
  --dashboard-success: #4facfe;
  --dashboard-warning: #f7971e;
  --dashboard-danger: #ff6b6b;
  --dashboard-info: #4ecdc4;
  --dashboard-text-primary: #2d3748;
  --dashboard-text-secondary: #718096;
  --dashboard-shadow-light: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --dashboard-shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --dashboard-shadow-heavy: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  --dashboard-border-radius: 20px;
  --dashboard-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  
  /* Paleta extendida de colores para gráficas de barras - 50 colores únicos */
  --chart-colors: [
    '#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b',
    '#ff6b6b', '#4ecdc4', '#f7971e', '#a18cd1', '#fbc2eb',
    '#ff9a9e', '#fecfef', '#fad0c4', '#ffd1ff', '#a8edea',
    '#fed6e3', '#ffecd2', '#fcb69f', '#f5576c', '#00f2fe',
    '#38f9d7', '#fa709a', '#fee140', '#ff9472', '#f2709c',
    '#b721ff', '#21d4fd', '#56ab2f', '#a8e6cf', '#2980b9',
    '#e74c3c', '#9b59b6', '#3498db', '#1abc9c', '#f39c12',
    '#e67e22', '#95a5a6', '#34495e', '#16a085', '#27ae60',
    '#d4af37', '#c0392b', '#8e44ad', '#2c3e50', '#f1c40f',
    '#e8a317', '#d68910', '#a569bd', '#5dade2', '#58d68d'
  ];
}

/* Colores adicionales para JavaScript - Variables CSS personalizadas */
:root {
  /* Paleta de colores vibrantes para barras - 50 colores */
  --bar-color-1: #667eea;  --bar-color-2: #764ba2;  --bar-color-3: #f093fb;  --bar-color-4: #4facfe;  --bar-color-5: #43e97b;
  --bar-color-6: #ff6b6b;  --bar-color-7: #4ecdc4;  --bar-color-8: #f7971e;  --bar-color-9: #a18cd1;  --bar-color-10: #fbc2eb;
  --bar-color-11: #ff9a9e; --bar-color-12: #fecfef; --bar-color-13: #fad0c4; --bar-color-14: #ffd1ff; --bar-color-15: #a8edea;
  --bar-color-16: #fed6e3; --bar-color-17: #ffecd2; --bar-color-18: #fcb69f; --bar-color-19: #f5576c; --bar-color-20: #00f2fe;
  --bar-color-21: #38f9d7; --bar-color-22: #fa709a; --bar-color-23: #fee140; --bar-color-24: #ff9472; --bar-color-25: #f2709c;
  --bar-color-26: #b721ff; --bar-color-27: #21d4fd; --bar-color-28: #56ab2f; --bar-color-29: #a8e6cf; --bar-color-30: #2980b9;
  --bar-color-31: #e74c3c; --bar-color-32: #9b59b6; --bar-color-33: #3498db; --bar-color-34: #1abc9c; --bar-color-35: #f39c12;
  --bar-color-36: #e67e22; --bar-color-37: #95a5a6; --bar-color-38: #34495e; --bar-color-39: #16a085; --bar-color-40: #27ae60;
  --bar-color-41: #d4af37; --bar-color-42: #c0392b; --bar-color-43: #8e44ad; --bar-color-44: #2c3e50; --bar-color-45: #f1c40f;
  --bar-color-46: #e8a317; --bar-color-47: #d68910; --bar-color-48: #a569bd; --bar-color-49: #5dade2; --bar-color-50: #58d68d;
}

/* Grid para las gráficas del dashboard - Mejorado para contenido variable */
.dashboard-graphics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
  gap: 2.5rem;
  margin-top: 2rem;
  padding: 1rem;
  align-items: start; /* Permite diferentes alturas */
}

/* Tarjeta individual de gráfica del dashboard - Altura dinámica */
.dashboard-graphic-card {
  background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--dashboard-border-radius);
  box-shadow: var(--dashboard-shadow-light);
  padding: 2.5rem 2rem 2rem 2rem;
  min-height: 420px; /* Aumentado para acomodar más contenido */
  min-width: 420px; /* Aumentado para etiquetas largas */
  height: auto; /* Altura automática */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  transition: var(--dashboard-transition);
  position: relative;
  overflow: hidden;
}

/* Clase para gráficas con muchas etiquetas */
.dashboard-graphic-card.many-labels {
  min-height: 500px;
  min-width: 480px;
  padding: 2.5rem 1.5rem 3rem 1.5rem; /* Más padding abajo para leyendas */
}

/* Clase para gráficas con etiquetas largas */
.dashboard-graphic-card.long-labels {
  min-height: 480px;
  min-width: 520px;
  padding: 2.5rem 1.5rem 3.5rem 1.5rem;
}

/* Clase combinada para muchas etiquetas largas */
.dashboard-graphic-card.many-long-labels {
  min-height: 580px;
  min-width: 600px;
  padding: 2.5rem 1.5rem 4rem 1.5rem;
}

/* Efecto de hover mejorado */
.dashboard-graphic-card:hover {
  transform: translateY(-8px);
  box-shadow: var(--dashboard-shadow-heavy);
  border-color: rgba(102, 126, 234, 0.3);
}

/* Efecto de brillo sutil */
.dashboard-graphic-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transition: left 0.5s;
  z-index: 1;
}

.dashboard-graphic-card:hover::before {
  left: 100%;
}

/* Título de la gráfica - Con soporte para texto largo */
.dashboard-graphic-card h3,
.dashboard-graphic-card h4 {
  font-size: 1.2rem;
  line-height: 1.4;
  margin-bottom: 1.5rem;
  color: var(--dashboard-text-primary);
  text-align: center;
  font-weight: 700;
  letter-spacing: 0.3px;
  position: relative;
  z-index: 2;
  background: linear-gradient(135deg, var(--dashboard-primary), var(--dashboard-secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  word-wrap: break-word;
  hyphens: auto;
  max-width: 100%;
  padding: 0 0.5rem;
}

/* Títulos muy largos */
.dashboard-graphic-card.long-title h3,
.dashboard-graphic-card.long-title h4 {
  font-size: 1.1rem;
  line-height: 1.3;
  margin-bottom: 1rem;
  max-height: 3.9rem; /* Máximo 3 líneas */
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
}

/* Línea decorativa bajo el título */
.dashboard-graphic-card h3::after,
.dashboard-graphic-card h4::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 3px;
  background: linear-gradient(90deg, var(--dashboard-accent), var(--dashboard-info));
  border-radius: 2px;
}

/* Contenedor del canvas - Redimensionado dinámicamente */
.dashboard-graphic-card .chart-container {
  position: relative;
  width: 100%;
  height: 280px; /* Altura base aumentada */
  z-index: 2;
  min-width: 100%;
  flex-grow: 1; /* Permite crecer según el contenido */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Canvas ajustado para diferentes tamaños de datos */
.dashboard-graphic-card canvas {
  max-width: 100% !important;
  max-height: 270px !important;
  margin: 0 auto;
  border-radius: 12px;
  position: relative;
  z-index: 2;
}

/* Canvas para gráficas con muchas etiquetas */
.dashboard-graphic-card.many-labels canvas {
  max-height: 320px !important;
}

.dashboard-graphic-card.long-labels canvas {
  max-height: 300px !important;
}

.dashboard-graphic-card.many-long-labels canvas {
  max-height: 350px !important;
}

/* Leyenda mejorada para múltiples elementos */
.dashboard-graphic-card .chartjs-legend {
  margin-top: 1.5rem;
  font-size: 0.85rem;
  text-align: center;
  color: var(--dashboard-text-secondary);
  z-index: 2;
  position: relative;
  max-height: 120px; /* Altura máxima para leyendas */
  overflow-y: auto; /* Scroll si es necesario */
  line-height: 1.4;
  padding: 0 0.5rem;
}

/* Leyenda para muchas etiquetas */
.dashboard-graphic-card.many-labels .chartjs-legend {
  font-size: 0.8rem;
  max-height: 150px;
  column-count: 2; /* Dos columnas para muchas etiquetas */
  column-gap: 1rem;
  text-align: left;
}

/* Leyenda para etiquetas largas */
.dashboard-graphic-card.long-labels .chartjs-legend {
  font-size: 0.8rem;
  text-align: left;
  max-height: 180px;
}

/* Leyenda para muchas etiquetas largas */
.dashboard-graphic-card.many-long-labels .chartjs-legend {
  font-size: 0.75rem;
  max-height: 200px;
  column-count: 1;
  text-align: left;
}

/* Elementos individuales de la leyenda */
.dashboard-graphic-card .chartjs-legend ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.5rem 1rem;
}

.dashboard-graphic-card.many-labels .chartjs-legend ul,
.dashboard-graphic-card.long-labels .chartjs-legend ul,
.dashboard-graphic-card.many-long-labels .chartjs-legend ul {
  flex-direction: column;
  align-items: flex-start;
  gap: 0.3rem;
}

.dashboard-graphic-card .chartjs-legend li {
  display: flex;
  align-items: center;
  margin: 0.2rem 0;
  word-break: break-word;
  max-width: 100%;
}

.dashboard-graphic-card .chartjs-legend li span {
  display: inline-block;
  width: 12px;
  height: 12px;
  margin-right: 0.5rem;
  border-radius: 2px;
  flex-shrink: 0;
}

/* Scroll personalizado para leyendas largas */
.dashboard-graphic-card .chartjs-legend::-webkit-scrollbar {
  width: 4px;
}

.dashboard-graphic-card .chartjs-legend::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 2px;
}

.dashboard-graphic-card .chartjs-legend::-webkit-scrollbar-thumb {
  background: var(--dashboard-primary);
  border-radius: 2px;
}

/* Tooltip personalizado para etiquetas largas */
.dashboard-tooltip {
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  font-size: 0.85rem;
  line-height: 1.4;
  max-width: 250px;
  word-wrap: break-word;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  z-index: 1000;
}

/* Gradientes de fondo para diferentes números de tarjetas */
.dashboard-graphic-card:nth-child(1) { background: linear-gradient(145deg, #a8edea 0%, #fed6e3 100%); }
.dashboard-graphic-card:nth-child(2) { background: linear-gradient(145deg, #ffecd2 0%, #fcb69f 100%); }
.dashboard-graphic-card:nth-child(3) { background: linear-gradient(145deg, #ff9a9e 0%, #fecfef 100%); }
.dashboard-graphic-card:nth-child(4) { background: linear-gradient(145deg, #a18cd1 0%, #fbc2eb 100%); }
.dashboard-graphic-card:nth-child(5) { background: linear-gradient(145deg, #fad0c4 0%, #ffd1ff 100%); }
.dashboard-graphic-card:nth-child(6) { background: linear-gradient(145deg, #667eea 0%, #764ba2 100%); color: white; }
.dashboard-graphic-card:nth-child(7) { background: linear-gradient(145deg, #f093fb 0%, #f5576c 100%); color: white; }
.dashboard-graphic-card:nth-child(8) { background: linear-gradient(145deg, #4facfe 0%, #00f2fe 100%); color: white; }
.dashboard-graphic-card:nth-child(9) { background: linear-gradient(145deg, #43e97b 0%, #38f9d7 100%); }
.dashboard-graphic-card:nth-child(10) { background: linear-gradient(145deg, #fa709a 0%, #fee140 100%); }
.dashboard-graphic-card:nth-child(11) { background: linear-gradient(145deg, #ff9472 0%, #f2709c 100%); color: white; }
.dashboard-graphic-card:nth-child(12) { background: linear-gradient(145deg, #b721ff 0%, #21d4fd 100%); color: white; }
.dashboard-graphic-card:nth-child(13) { background: linear-gradient(145deg, #56ab2f 0%, #a8e6cf 100%); }
.dashboard-graphic-card:nth-child(14) { background: linear-gradient(145deg, #2980b9 0%, #6bb6ff 100%); color: white; }
.dashboard-graphic-card:nth-child(15) { background: linear-gradient(145deg, #ffeef8 0%, #e6e6fa 100%); border: 2px solid #d8b4fe; }
.dashboard-graphic-card:nth-child(16) { background: linear-gradient(145deg, #ff7e5f 0%, #feb47b 100%); color: white; }
.dashboard-graphic-card:nth-child(17) { background: linear-gradient(145deg, #00c9ff 0%, #92fe9d 100%); }
.dashboard-graphic-card:nth-child(18) { background: linear-gradient(145deg, #fc4a1a 0%, #f7b733 100%); color: white; }
.dashboard-graphic-card:nth-child(19) { background: linear-gradient(145deg, #8360c3 0%, #2ebf91 100%); color: white; }
.dashboard-graphic-card:nth-child(20) { background: linear-gradient(145deg, #00f5ff 0%, #fc00ff 100%); color: white; }

/* Ajustar texto blanco para tarjetas con fondo oscuro */
.dashboard-graphic-card:nth-child(6) h3, .dashboard-graphic-card:nth-child(6) h4,
.dashboard-graphic-card:nth-child(7) h3, .dashboard-graphic-card:nth-child(7) h4,
.dashboard-graphic-card:nth-child(8) h3, .dashboard-graphic-card:nth-child(8) h4,
.dashboard-graphic-card:nth-child(11) h3, .dashboard-graphic-card:nth-child(11) h4,
.dashboard-graphic-card:nth-child(12) h3, .dashboard-graphic-card:nth-child(12) h4,
.dashboard-graphic-card:nth-child(14) h3, .dashboard-graphic-card:nth-child(14) h4,
.dashboard-graphic-card:nth-child(16) h3, .dashboard-graphic-card:nth-child(16) h4,
.dashboard-graphic-card:nth-child(18) h3, .dashboard-graphic-card:nth-child(18) h4,
.dashboard-graphic-card:nth-child(19) h3, .dashboard-graphic-card:nth-child(19) h4,
.dashboard-graphic-card:nth-child(20) h3, .dashboard-graphic-card:nth-child(20) h4 {
  color: white;
  -webkit-text-fill-color: white;
}

/* Patrón que se repite después de 20 tarjetas */
.dashboard-graphic-card:nth-child(n+21) {
  background: linear-gradient(145deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.dashboard-graphic-card:nth-child(n+21) h3,
.dashboard-graphic-card:nth-child(n+21) h4 {
  color: white;
  -webkit-text-fill-color: white;
}

/* Estados adicionales */
.dashboard-graphic-card.loading {
  background: linear-gradient(145deg, #f7fafc, #edf2f7);
  animation: dashboard-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes dashboard-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: .8; }
}

.dashboard-graphic-card.success { border-left: 5px solid var(--dashboard-success); }
.dashboard-graphic-card.warning { border-left: 5px solid var(--dashboard-warning); }
.dashboard-graphic-card.info { border-left: 5px solid var(--dashboard-info); }

/* Responsive mejorado */
@media (max-width: 1200px) {
  .dashboard-graphics-grid {
    grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
  }
  
  .dashboard-graphic-card.many-long-labels {
    min-width: 450px;
  }
}

@media (max-width: 768px) {
  .dashboard-graphics-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
    padding: 0.5rem;
  }
  
  .dashboard-graphic-card {
    min-width: unset;
    min-height: 350px;
    padding: 1.5rem 1rem;
    margin: 0;
  }
  
  .dashboard-graphic-card.many-labels,
  .dashboard-graphic-card.long-labels,
  .dashboard-graphic-card.many-long-labels {
    min-width: unset;
    min-height: 400px;
    padding: 1.5rem 1rem 2.5rem 1rem;
  }
  
  .dashboard-graphic-card h3,
  .dashboard-graphic-card h4 {
    font-size: 1rem;
    margin-bottom: 1rem;
  }
  
  .dashboard-graphic-card canvas {
    max-height: 220px !important;
  }
  
  .dashboard-graphic-card.many-labels .chartjs-legend {
    column-count: 1;
    font-size: 0.75rem;
  }
}

@media (max-width: 480px) {
  .dashboard-graphics-grid {
    gap: 1rem;
  }
  
  .dashboard-graphic-card {
    min-height: 320px;
    padding: 1rem;
    border-radius: 16px;
  }
  
  .dashboard-graphic-card.many-labels,
  .dashboard-graphic-card.long-labels,
  .dashboard-graphic-card.many-long-labels {
    min-height: 380px;
    padding: 1rem 0.75rem 2rem 0.75rem;
  }
  
  .dashboard-graphic-card h3,
  .dashboard-graphic-card h4 {
    font-size: 0.9rem;
  }
  
  .dashboard-graphic-card canvas {
    max-height: 200px !important;
  }
  
  .dashboard-graphic-card .chartjs-legend {
    font-size: 0.7rem;
    max-height: 100px;
  }
}

/* Animaciones de entrada */
.dashboard-graphic-card {
  animation: dashboard-slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes dashboard-slideInUp {
  from {
    transform: translateY(60px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Retrasos escalonados */
.dashboard-graphic-card:nth-child(1) { animation-delay: 0.1s; }
.dashboard-graphic-card:nth-child(2) { animation-delay: 0.2s; }
.dashboard-graphic-card:nth-child(3) { animation-delay: 0.3s; }
.dashboard-graphic-card:nth-child(4) { animation-delay: 0.4s; }
.dashboard-graphic-card:nth-child(5) { animation-delay: 0.5s; }
.dashboard-graphic-card:nth-child(6) { animation-delay: 0.6s; }
.dashboard-graphic-card:nth-child(7) { animation-delay: 0.7s; }
.dashboard-graphic-card:nth-child(8) { animation-delay: 0.8s; }
.dashboard-graphic-card:nth-child(9) { animation-delay: 0.9s; }
.dashboard-graphic-card:nth-child(10) { animation-delay: 1.0s; }

/* Accesibilidad */
.dashboard-graphic-card:focus {
  outline: 3px solid var(--dashboard-primary);
  outline-offset: 2px;
}

/* Modo oscuro */
@media (prefers-color-scheme: dark) {
  .dashboard-graphics-grid {
    --dashboard-text-primary: #f7fafc;
    --dashboard-text-secondary: #a0aec0;
  }
  
  .dashboard-graphic-card {
    background: linear-gradient(145deg, #2d3748 0%, #4a5568 100%);
    border-color: rgba(255, 255, 255, 0.1);
    color: var(--dashboard-text-primary);
  }
}

/* Estilos específicos por categoría */
.dashboard-graphic-card[data-category="academic"] {
  background: linear-gradient(145deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.dashboard-graphic-card[data-category="academic"] h3,
.dashboard-graphic-card[data-category="academic"] h4 {
  color: white;
  -webkit-text-fill-color: white;
}

.dashboard-graphic-card[data-category="demographic"] {
  background: linear-gradient(145deg, #f093fb 0%, #f5576c 100%);
  color: white;
}

.dashboard-graphic-card[data-category="demographic"] h3,
.dashboard-graphic-card[data-category="demographic"] h4 {
  color: white;
  -webkit-text-fill-color: white;
}

.dashboard-graphic-card[data-category="mobility"] {
  background: linear-gradient(145deg, #4facfe 0%, #00f2fe 100%);
  color: white;
}

.dashboard-graphic-card[data-category="mobility"] h3,
.dashboard-graphic-card[data-category="mobility"] h4 {
  color: white;
  -webkit-text-fill-color: white;
}

.dashboard-graphic-card[data-category="scholarship"] {
  background: linear-gradient(145deg, #43e97b 0%, #38f9d7 100%);
}

/* Clase helper para acceder a los colores desde JavaScript */
.chart-color-palette {
  display: none;
}

.chart-color-palette::before {
  content: '#667eea,#764ba2,#f093fb,#4facfe,#43e97b,#ff6b6b,#4ecdc4,#f7971e,#a18cd1,#fbc2eb,#ff9a9e,#fecfef,#fad0c4,#ffd1ff,#a8edea,#fed6e3,#ffecd2,#fcb69f,#f5576c,#00f2fe,#38f9d7,#fa709a,#fee140,#ff9472,#f2709c,#b721ff,#21d4fd,#56ab2f,#a8e6cf,#2980b9,#e74c3c,#9b59b6,#3498db,#1abc9c,#f39c12,#e67e22,#95a5a6,#34495e,#16a085,#27ae60,#d4af37,#c0392b,#8e44ad,#2c3e50,#f1c40f,#e8a317,#d68910,#a569bd,#5dade2,#58d68d';
}

/* Utility classes para aplicar dinámicamente */
.chart-small { min-height: 380px; min-width: 380px; }
.chart-medium { min-height: 450px; min-width: 450px; }
.chart-large { min-height: 520px; min-width: 520px; }
.chart-xlarge { min-height: 600px; min-width: 600px; }

/* 
Función JavaScript helper para aplicar clases dinámicamente:

function setupChartCard(element, dataLength, maxLabelLength) {
  element.classList.remove('many-labels', 'long-labels', 'many-long-labels', 'long-title');
  
  // Detectar muchas etiquetas
  if (dataLength > 15) {
    element.classList.add('many-labels');
  }
  
  // Detectar etiquetas largas
  if (maxLabelLength > 20) {
    element.classList.add('long-labels');
  }
  
  // Detectar ambos casos
  if (dataLength > 15 && maxLabelLength > 20) {
    element.classList.add('many-long-labels');
  }
  
  // Detectar título largo
  const title = element.querySelector('h3, h4');
  if (title && title.textContent.length > 40) {
    element.classList.add('long-title');
  }
}

// Uso:
// setupChartCard(document.querySelector('.dashboard-graphic-card'), yourData.length, maxLabelLength);
*/